@echo off
echo off
SET HOUR=%TIME:~0,2%
IF "%HOUR:~0,1%" == " " SET HOUR=0%HOUR:~1,1%
::Nome do Projeto
SET PROJETO=exemplo
::IP do Servidor do PostgreSQL:
SET PGHOST=xxxxxxxxxxxxxx
::Porta de acesso ao PostgreSQL:
SET PGPORT=0000
::Base de Dados que será feito backup:
SET PGDATABASE=xxxxxxxxxx
::Usuário da base de dados:
SET PGUSER=u_backup
::Senha da base de dados
SET PGPASSWORD=xxxxxxxxxxxxx
::Diretório de destino do arquivo de Backup:
SET DESTDIR=E:xxxxxxxxx\xxxxxxxxxx\\\
::pg_dump.exe -F c -b -v -f %DESTDIR%_%PGDATABASE%.backup
pg_dump -F p -C -f %DESTDIR%%PROJETO%_%PGDATABASE%_%date:~0,2%-%date:~3,2%-%date:~6,10%-%HOUR%-%time:~3,2%.sql
echo %ERRORLEVEL%
IF %ERRORLEVEL% == 0 Echo Deu tudo certo
